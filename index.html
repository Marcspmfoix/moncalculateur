<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Calculateur Hauteurs de Coupe - Affichage final</title>
<style>
  body {
    font-size: 1.3em;
    font-family: Arial, sans-serif;
    padding: 12px;
    max-width: 650px;
    margin: auto;
    background-color: #fffff8;
    color: #000;
  }
  input, button {
    font-size: 1.2em;
    padding: 8px 12px;
    margin: 8px 0;
    width: 100%;
    box-sizing: border-box;
    border-radius: 6px;
  }
  input[type=number]::-webkit-inner-spin-button,
  input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none; margin: 0;
  }
  label { display: block; margin-top:14px; font-weight: bold; }
  h3, h4 { font-size: 1.3em; margin-top: 15px; }
  ul { padding-left: 20px; }
  button {
    background-color: #28a745; color: white; border: none;
    cursor: pointer; font-weight: bold; box-shadow: 2px 2px 6px rgba(0,0,0,0.25);
  }
  button:hover { background-color:#218838; }
  .champ-group { display: flex; gap: 12px; }
  .champ-group input { width: calc(50% - 8px); }
  .info { font-size: 0.95em; color: #555; margin: 9px 0 12px 0; }
  .err { color: #a00; font-size: 0.96em; }
</style>
</head>
<body>

<h3>Calcul des hauteurs de coupe</h3>
<div class="info">√âpaisseur du trait de scie‚ÄØ: <strong>2 mm (fixe)</strong></div>

<form id="formPlanches" autocomplete="off" onsubmit="event.preventDefault(); calculer();">
  <label for="epaisseur">√âpaisseur d√©sir√©e d'une planche (mm) :</label>
  <input type="number" id="epaisseur" min="1" value="25" required step="any"/>
  <div class="champ-group">
    <div style="width:50%">
      <label for="nbrPlanches">Nombre de planches souhait√© :</label>
      <input type="number" id="nbrPlanches" min="0" value="0" oninput="vider('tronc')"/>
    </div>
    <div style="width:50%">
      <label for="tronc">Hauteur du tronc √† d√©biter (mm) :</label>
      <input type="number" id="tronc" min="0" value="150" oninput="vider('nbrPlanches')"/>
    </div>
  </div>
  <button type="submit">üî¢ Calculer</button>
</form>

<div id="erreur" class="err"></div>
<h4>Hauteurs de coupe‚ÄØ:</h4>
<ul id="resultats"></ul>

<script>
const ts = 2; // √âpaisseur trait de scie fixe

function vider(champ) {
  document.getElementById(champ).value = 0;
  document.getElementById('erreur').innerText = '';
  document.getElementById('resultats').innerHTML = '';
}

function calculer() {
  const ep = parseFloat(document.getElementById('epaisseur').value);
  const nbrPlanches = parseInt(document.getElementById('nbrPlanches').value, 10) || 0;
  const hauteurTronc = parseFloat(document.getElementById('tronc').value) || 0;
  const errDiv = document.getElementById('erreur');
  let resultats = '';
  errDiv.innerText = '';

  if (nbrPlanches > 0 && hauteurTronc === 0) {
    // Cas 1 : nombre de planches demand√©
    let position = 0;
    for (let i = 1; i <= nbrPlanches; i++) {
      if (i === 1) {
        position += ep;
      } else if (i < nbrPlanches) {
        position += ep + ts;
      } else {
        position += ep;
      }
      resultats += `<li>Hauteur planche ${i} : <strong>${position.toFixed(2)} mm</strong></li>`;
    }
    document.getElementById('resultats').innerHTML = resultats;
    return;
  }

  if (hauteurTronc > 0 && nbrPlanches === 0) {
    // Cas 2 : hauteur du tronc donn√©e
    let traits = [hauteurTronc];
    let pos = hauteurTronc;
    while (true) {
      pos -= (ep + ts);
      if (pos <= 0) break;
      traits.push(pos);
    }
    traits.push(0);
    traits.sort((a, b) => a - b);
    let n = traits.length - 1;
    if (n >= 4) {
      resultats += `<li>Exemple: hauteur planche 1 : ${traits[1].toFixed(2)} mm</li>`;
      resultats += `<li>Exemple: hauteur planche 4 : ${traits[4].toFixed(2)} mm</li>`;
    }
    resultats += `<li><strong>Nombre de planches obtenues : ${n}</strong></li>`;
    for (let i = 1; i < traits.length; i++) {
      resultats += `<li>Hauteur planche ${i} : <strong>${traits[i].toFixed(2)} mm</strong></li>`;
    }
    document.getElementById('resultats').innerHTML = resultats;
    return;
  }

  errDiv.innerText = "Veuillez renseigner soit le nombre de planches, soit la hauteur du tronc, mais pas les deux.";
  document.getElementById('resultats').innerHTML = '';
}
</script>

</body>
</html>











